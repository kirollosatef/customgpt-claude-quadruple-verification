All done. Here's a summary of the implementation in `upload-server.js`:

**All 6 required processing steps:**

| Requirement | Implementation |
|---|---|
| **File type validation** | `fileFilter` checks MIME type against `ALLOWED_MIME_TYPES` (jpeg, png, gif, webp, svg, bmp, tiff). Rejects non-images with a 400 error. (line 43-48) |
| **File size check (max 5MB)** | Multer `limits.fileSize` set to `5 * 1024 * 1024`. Oversized uploads get a 400 with a clear message. (line 29, 54) |
| **Unique filenames** | `crypto.randomUUID()` generates a UUID v4, appended with the original file extension. (line 37-39) |
| **Save to local disk** | Multer `diskStorage` writes files to `./uploads/`. Directories are created at startup with `mkdirSync`. (line 12-16, 32-41) |
| **Thumbnail generation** | `sharp` resizes to 200x200 (`fit: inside`, no enlargement). SVG/BMP/TIFF are converted to PNG. Thumbnails saved to `./uploads/thumbnails/`. (line 61-89) |
| **Return upload metadata** | JSON response includes original name, saved filename, MIME type, size, file path, thumbnail details, and timestamp. (line 102-113) |

**Additional details:**
- Error handler cleans up the uploaded file if thumbnail generation fails (line 117)
- Static file serving for `./uploads/` so files are accessible via URL (line 126)
- Proper multer error middleware with human-readable messages (line 129-140)
- `module.exports = app` for testability

**Usage:**
```bash
npm install
npm start
# Then:
curl -F "file=@photo.jpg" http://localhost:3000/upload
```